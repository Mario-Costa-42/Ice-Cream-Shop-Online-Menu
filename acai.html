<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A√ßa√≠</title>
    <link rel="icon" type="image/x-icon" href="./assets/emoji-de-sorvete.png">
    <link rel="stylesheet" href="acai.css" />
</head>
<body>
    <a href="./menu.html">
      <img src="./assets/arrow_back.svg" alt="In√≠cio" id="home" />
    </a>
    <h1 id="AcaiTitle">A√ßa√≠</h1>
<h2 id="AcaiSubtitle">Escolha o tamanho</h2>

    <div class="opcoes">
  <div class="Quantidademl" data-tamanho="300ml" data-preco="13.00">
      300ml <span class="preco">R$13,00</span>
  </div>
  <div class="Quantidademl" data-tamanho="500ml" data-preco="16.00">
      500ml <span class="preco">R$16,00</span>
  </div>
</div>

<h3 id="AcaiInformation">1 cobertura e 3 acompanhamentos gr√°tis (1 real extra)</h3>

<h2 id="AcaiSubtitle">Coberturas</h2>
<div id="saboresContainer" style="display: flex; flex-direction: column; align-items: center;">
  <div class="sabor" data-tipo="cobertura" style="background-color: #8d6e63;">Chocolate</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #ff4f8b;">Morango</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #3c096c;">Uva</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #84a98c;">Menta</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #A3451F;">Caramelo</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #C96D92;">Tutti frutti</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #368BC1;">Blue ice</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #FFC685;">Leite condensado</div>
  <div class="sabor" data-tipo="cobertura" style="background-color: #B65065;">Frutas vermelhas</div>
</div>

<h2 id="AcaiSubtitle">Acompanhamentos</h2>
<div id="saboresContainer" style="display: flex; flex-direction: column; align-items: center;">
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #fff;">Leite ninho</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #B2794C;">Pa√ßoca</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #005FA7;">Disquete</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #A43C20;">Amendoim</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #8F491E;">Chocobool</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #3D2F2B;">Chocopower</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #47202B;">Granola</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #E8DAC0;">Farinha Lactea</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #FDEF04;">Jujuba</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #F5E9E7;">Coco ralado</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #F6BC68;">Canudinho</div>
  <div class="sabor" data-tipo="acompanhamento" style="background-color: #543B2F;">Granulado</div>
</div>

<h2 id="AcaiSubtitle">Adicionais Extras</h2>
<div id="saboresContainer" style="display: flex; flex-direction: column; align-items: center;">
  <div class="sabor" data-tipo="extra" data-preco="3.00" style="background-color: #ff4f8b;">Morango <span class="preco">R$3,00</span></div>
  <div class="sabor" data-tipo="extra" data-preco="1.50" style="background-color: #DEBE51;">Banana <span class="preco">R$1,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="2.00" style="background-color: #B7BA4E;">Uva verde <span class="preco">R$2,00</span></div>
  <div class="sabor" data-tipo="extra" data-preco="2.00" style="background-color: #DD6831;">Ovomaltine <span class="preco">R$2,00</span></div>
  <div class="sabor" data-tipo="extra" data-preco="3.50" style="background-color: #FFD22F;">Creme ninho <span class="preco">R$3,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="3.50" style="background-color: #D48DB6;">Creme morango <span class="preco">R$3,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="3.50" style="background-color: #77412A;">Creme bombom <span class="preco">R$3,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="3.50" style="background-color: #CBB99E;">Creme cookies <span class="preco">R$3,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="3.50" style="background-color: #6E3827;">Creme brigadeiro <span class="preco">R$3,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="5.00" style="background-color: #A6A358;">Creme pistache <span class="preco">R$5,00</span></div>
  <div class="sabor" data-tipo="extra" data-preco="5.50" style="background-color: #613114;">Nutella <span class="preco">R$5,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="5.50" style="background-color: #CC1C24;">Creme KitKat <span class="preco">R$5,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="6.00" style="background-color: #D90A12;">KitKat <span class="preco">R$6,00</span></div>
  <div class="sabor" data-tipo="extra" data-preco="3.50" style="background-color: #00A1D9;">Trento <span class="preco">R$3,50</span></div>
  <div class="sabor" data-tipo="extra" data-preco="2.00" style="background-color: #e76f51;">Fine <span class="preco">R$2,00</span></div>
  <div class="sabor" data-tipo="extra" data-preco="2.00" style="background-color: #e0e1dd;">Marshmallow <span class="preco">R$2,00</span></div>
  <button class="btn-carrinho" onclick="adicionarAcai()">üõí Adicionar ao Carrinho</button>
</div>

</div>


   <script>

    function adicionarAcai() {
  let tamanhoSelecionado = document.querySelector(".Quantidademl.selecionado");
  if (!tamanhoSelecionado) {
    alert("Selecione o tamanho do a√ßa√≠!");
    return;
  }

  let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

  let tamanho = tamanhoSelecionado.getAttribute("data-tamanho");
  let precoBase = parseFloat(tamanhoSelecionado.getAttribute("data-preco"));

  // pega coberturas e acompanhamentos selecionados
  let coberturas = [...document.querySelectorAll(".sabor.selecionado[data-tipo='cobertura']")].map(e => e.textContent.trim());
  let acompanhamentos = [...document.querySelectorAll(".sabor.selecionado[data-tipo='acompanhamento']")].map(e => e.textContent.trim());

  // pega adicionais extras
  let extras = [...document.querySelectorAll(".sabor.selecionado[data-tipo='extra']")].map(e => {
    return {
      nome: e.childNodes[0].textContent.trim(),
      preco: parseFloat(e.getAttribute("data-preco"))
    };
  });

  // calcula valor dos extras normais
  let subtotal = precoBase + extras.reduce((sum, e) => sum + e.preco, 0);

  // regra: 1 cobertura gr√°tis, o resto custa R$1,00
  if (coberturas.length > 1) {
    subtotal += (coberturas.length - 1) * 1;
  }

  // regra: 3 acompanhamentos gr√°tis, o resto custa R$1,00
  if (acompanhamentos.length > 3) {
    subtotal += (acompanhamentos.length - 3) * 1;
  }

  carrinho.push({
    produto: "A√ßa√≠",
    tamanho: tamanho,
    coberturas: coberturas,
    acompanhamentos: acompanhamentos,
    extras: extras,
    preco: precoBase,
    subtotal: subtotal
  });

  localStorage.setItem("carrinho", JSON.stringify(carrinho));
  alert("A√ßa√≠(s) adicionado ao carrinho com sucesso!");
  // window.location.href = "carrinho.html";
}

    // permite clicar para selecionar/desselecionar
    document.querySelectorAll(".Quantidademl").forEach(div => {
      div.addEventListener("click", () => {
        document.querySelectorAll(".Quantidademl").forEach(d => d.classList.remove("selecionado"));
        div.classList.add("selecionado");
      });
    });

    document.querySelectorAll(".sabor").forEach(div => {
      div.addEventListener("click", () => div.classList.toggle("selecionado"));
    });
</script>

</body>

</html>